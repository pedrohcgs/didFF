<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Test if Parallel Trends is Sensitive to Functional Form • didFF</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Test if Parallel Trends is Sensitive to Functional Form">
<meta property="og:description" content="Difference-in-Differences (DiD) estimators rely on the validity of a parallel trends assumption. In practice, it often may not be clear from theory that parallel trends should hold for a particular choice of functional form. For example, a researcher may be interested in the average treatment effect on the treated (ATT) in levels for a particular policy, but it may not be obvious that the variation in the policy generates parallel trends specifically in levels rather than in logs or some other transformation. This package contains tools for assessing if parallel trends is insensitive to functional form using the methods developed in Roth and Sant'Anna (2023) &lt;doi:10.3982/ECTA19402&gt;. The package accommodates setups with multiple time periods, variation in treatment timing, and allow for covariates. We provide estimates, plots, and p-values for the implied density of the untreated potential outcomes under the null-hypothesis that paralell trends assumptions is not sensitive to functional form of the outcome.">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@pedrohcgs">
<meta name="twitter:site" content="@pedrohcgs">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">didFF</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-la"></span>

  </a>
</li>
<li>
  <a href="reference/index.html">Functions</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/pedrohcgs/didFF/" class="external-link">
    <span class="fab fa-github fa-la"></span>

  </a>
</li>
<li>
  <a href="http://twitter.com/pedrohcgs" class="external-link">
    <span class="fab fa-twitter fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="difference-in-differences-and-functional-form">Difference-in-Differences and Functional Form<a class="anchor" aria-label="anchor" href="#difference-in-differences-and-functional-form"></a>
</h1></div>
<!-- badges: start -->
<p><img src="https://github.com/pedrohcgs/didFF/actions/workflows/tests.yml/badge.svg" alt="Unit and build tests"><!-- badges: end --></p>
<p>The <code>didFF</code> R package assesses when the validity of difference-in-differences and related estimators depends on functional form, based on the theoretical results in <a href="https://doi.org/10.3982/ECTA19402" class="external-link">Roth and Sant’Anna (2023)</a>. This package provides a test for whether parallel trends is insensitive to functional form by estimating the implied density of potential outcomes under the null and checking if it is significantly below zero at some point.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of didFF from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Install the remotes package if not already installed</span></span>
<span><span class="co"># install.packages("remotes")</span></span>
<span></span>
<span><span class="co">#Install the didFF package using remotes</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"pedrohcgs/didFF"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>We now provide and example of how to use the package using the empirical illustration from <a href="https://doi.org/10.3982/ECTA19402" class="external-link">Roth and Sant’Anna (2023, p. 743–744)</a>.</p>
</div>
<div class="section level2">
<h2 id="loading-the-package-and-the-data">Loading the package and the data<a class="anchor" aria-label="anchor" href="#loading-the-package-and-the-data"></a>
</h2>
<p>We first load the package and the data.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load didFF and other auxiliary libraries for data manipulation</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://psantanna.com/didFF/" class="external-link">didFF</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span> </span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">mw_df</span><span class="op">&lt;-</span><span class="fu">didFF</span><span class="fu">::</span><span class="va"><a href="reference/Cengiz_df.html">Cengiz_df</a></span> <span class="co">#load Cengiz et al. (2019) data frame</span></span></code></pre></div>
<p>The data is derived from the dataset compiled by <a href="https://doi.org/10.1093/qje/qjz014" class="external-link">Cengiz et al. (2019)</a>. For each state and year, it provides the number of people employed at each wage level (coarsened to 25c bins), with a value of 0 for people not in the labor force. It also contains an indicator variables (treated) for whether a state raised its minimum wage in the given year.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mw_df</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt;   wagebins statenum year quarterdate overallcountpc treated_quarter</span></span>
<span><span class="co">#&gt; 1      100        1 2007         188    0.000000000               0</span></span>
<span><span class="co">#&gt; 2      100        1 2007         189    0.000000000               0</span></span>
<span><span class="co">#&gt; 3      100        1 2007         190    0.000000000               0</span></span>
<span><span class="co">#&gt; 4      100        1 2007         191    0.000000000               0</span></span>
<span><span class="co">#&gt; 5      100        1 2008         192    0.001836395               0</span></span>
<span><span class="co">#&gt;   treated_year   MW population</span></span>
<span><span class="co">#&gt; 1            0 5.15    3578266</span></span>
<span><span class="co">#&gt; 2            0 5.15    3564137</span></span>
<span><span class="co">#&gt; 3            0 5.85    3576752</span></span>
<span><span class="co">#&gt; 4            0 5.85    3583092</span></span>
<span><span class="co">#&gt; 5            0 5.85    3577623</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="testing-functional-form-for-did-between-2007-and-2015">Testing Functional Form for DiD between 2007 and 2015<a class="anchor" aria-label="anchor" href="#testing-functional-form-for-did-between-2007-and-2015"></a>
</h2>
<p>We will now test whether a DiD analysis for the effect of the minimum wage on wages (weighted by population) is insensitive to functional form—i.e. that parallel trends is valid regardless of whether wages are measured in levels, logs, percentiles, etc. We first consider an analysis where the pre-treatment period is 2007, the post-treatment period is 2015, and the treatment is whether a state raised its minimum wage at any point between the pre-treatment and post-treatment periods. We call didFF as follows:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create treatment groups according to the description above</span></span>
<span><span class="va">start_t</span> <span class="op">=</span> <span class="fl">2007</span> <span class="co"># pre-treatment year</span></span>
<span><span class="va">end_t</span>   <span class="op">=</span> <span class="fl">2015</span> <span class="co"># post-treatment year</span></span>
<span></span>
<span><span class="co"># Create dataset</span></span>
<span><span class="va">mw_df_2007_2015</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">mw_df</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># filter out data outside the time window of interest</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">(</span><span class="va">start_t</span> <span class="op">&lt;=</span> <span class="va">year</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">year</span> <span class="op">&lt;=</span> <span class="va">end_t</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">statenum</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># Create group variable that take value end_t if state was ever treated in this period, and 0 otherwise</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">treated_quarter</span> <span class="op">&gt;</span> <span class="fl">0</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">*</span><span class="va">end_t</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="co">#filter data back to pre and post periods only</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="va">start_t</span><span class="op">)</span> <span class="op">|</span> <span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="va">end_t</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">statenum</span>, <span class="va">wagebins</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>wagebins<span class="op">=</span><span class="va">wagebins</span><span class="op">/</span><span class="fl">100</span>, wgt<span class="op">=</span><span class="va">overallcountpc</span><span class="op">*</span><span class="va">population</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">wgt</span> <span class="op">&gt;=</span> <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Run the test (Replicates Figure 2a in Roth and Sant'Anna, 2023)</span></span>
<span><span class="va">test_2007_2015</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/didFF.html">didFF</a></span><span class="op">(</span></span>
<span>  data        <span class="op">=</span> <span class="va">mw_df_2007_2015</span>,</span>
<span>  idname      <span class="op">=</span> <span class="st">"statenum"</span>,</span>
<span>  yname       <span class="op">=</span> <span class="st">"wagebins"</span>,</span>
<span>  tname       <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>  gname       <span class="op">=</span> <span class="st">"group"</span>,</span>
<span>  weightsname <span class="op">=</span> <span class="st">"wgt"</span>,</span>
<span>  est_method  <span class="op">=</span> <span class="st">"reg"</span>,</span>
<span>  binpoints   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">mw_df_2007_2015</span><span class="op">$</span><span class="va">wagebins</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  allow_unbalanced_panel <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  lb_graph    <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  ub_graph    <span class="op">=</span> <span class="fl">29.75</span>,</span>
<span>  seed        <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in didFF(data = mw_df_2007_2015, idname = "statenum", yname =</span></span>
<span><span class="co">#&gt; "wagebins", : You have observations with g=0 and all time periods t&gt;0; assuming</span></span>
<span><span class="co">#&gt; the g=0 cohort is never-treated.</span></span>
<span></span>
<span><span class="va">test_2007_2015</span><span class="op">$</span><span class="va">plot</span></span></code></pre></div>
<p><img src="reference/figures/README-2007-2015-1.png" width="100%"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_2007_2015</span><span class="op">$</span><span class="va">pval</span></span>
<span><span class="co">#&gt; [1] 0</span></span></code></pre></div>
<p>The plot shows the implied counterfactual density for the treated group if parallel trends holds for all functional forms of the outcome, which Roth and Sant’Anna show is equivalent to “parallel trends of distributions”. (To preserve reasonable scaling, we use the options <code>lb_graph</code> and <code>ub_graph</code> so that the plot shows only wages above 5 and below 30). The figure shows that the implied density is negative for wages between approximately $5-7/hour.</p>
<p>The plot also shows a formal p-value for the null hypothesis that parallel trends holds for all functional forms (this is calculated using a “least-favorable” critical value for moment inequalities, as in, e.g., Section 4.1.1 of <a href="https://doi.org/10.1017/9781108227223.009" class="external-link">Canay and Shaikh (2017)</a>). The test shows that we are able to reject the null hypothesis that all of the implied densities are positive (p&lt;0.001). We thus reject the null that parallel trends hold for all functional forms of the outcome.</p>
</div>
<div class="section level2">
<h2 id="testing-functional-form-for-did-between-2010-and-2015">Testing Functional Form for DiD between 2010 and 2015<a class="anchor" aria-label="anchor" href="#testing-functional-form-for-did-between-2010-and-2015"></a>
</h2>
<p>By contrast, results using the period 2010-2015 shows that the estimated counterfactual distribution has positive density nearly everywhere, and we cannot formally reject the hypothesis that it is positive everywhere (p=0.293). This does not necessarily imply that parallel trends holds for all transformations of the outcome, but insensitivity to functional form is not rejected by the data in this example.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">start_t</span> <span class="op">=</span> <span class="fl">2010</span></span>
<span><span class="va">mw_df_2010_2015</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">mw_df</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">(</span><span class="va">start_t</span> <span class="op">&lt;=</span> <span class="va">year</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">year</span> <span class="op">&lt;=</span> <span class="va">end_t</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">statenum</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">treated_quarter</span> <span class="op">&gt;</span> <span class="fl">0</span>,na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">*</span><span class="va">end_t</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="va">start_t</span><span class="op">)</span> <span class="op">|</span> <span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="va">end_t</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">statenum</span>, <span class="va">wagebins</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>wagebins<span class="op">=</span><span class="va">wagebins</span><span class="op">/</span><span class="fl">100</span>, wgt<span class="op">=</span><span class="va">overallcountpc</span><span class="op">*</span><span class="va">population</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">wgt</span> <span class="op">&gt;=</span> <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Run the test (Replicates Figure 2b in Roth and Sant'Anna, 2023)</span></span>
<span><span class="va">test_2010_2015</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/didFF.html">didFF</a></span><span class="op">(</span></span>
<span>  data        <span class="op">=</span> <span class="va">mw_df_2010_2015</span>,</span>
<span>  idname      <span class="op">=</span> <span class="st">"statenum"</span>,</span>
<span>  yname       <span class="op">=</span> <span class="st">"wagebins"</span>,</span>
<span>  tname       <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>  gname       <span class="op">=</span> <span class="st">"group"</span>,</span>
<span>  weightsname <span class="op">=</span> <span class="st">"wgt"</span>,</span>
<span>  est_method  <span class="op">=</span> <span class="st">"reg"</span>,</span>
<span>  binpoints   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">mw_df_2010_2015</span><span class="op">$</span><span class="va">wagebins</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  allow_unbalanced_panel <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  lb_graph    <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  ub_graph    <span class="op">=</span> <span class="fl">29.75</span>,</span>
<span>  seed        <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in didFF(data = mw_df_2010_2015, idname = "statenum", yname =</span></span>
<span><span class="co">#&gt; "wagebins", : You have observations with g=0 and all time periods t&gt;0; assuming</span></span>
<span><span class="co">#&gt; the g=0 cohort is never-treated.</span></span>
<span></span>
<span><span class="va">test_2010_2015</span><span class="op">$</span><span class="va">plot</span></span></code></pre></div>
<p><img src="reference/figures/README-2010-2015-1.png" width="100%"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_2010_2015</span><span class="op">$</span><span class="va">pval</span></span>
<span><span class="co">#&gt; [1] 0.3317</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="distributional-treatement-effects">Distributional Treatement Effects<a class="anchor" aria-label="anchor" href="#distributional-treatement-effects"></a>
</h2>
<p>Under parallel trends it is possible to compute the counterfactual distribution of the treated group, which is the distribution of <code>Y(1)</code> minus the implied distribution of <code>Y(0)</code> for treated groups.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dist_2007_2015</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/distDD.html">distDD</a></span><span class="op">(</span></span>
<span>  data        <span class="op">=</span> <span class="va">mw_df_2007_2015</span>,</span>
<span>  idname      <span class="op">=</span> <span class="st">"statenum"</span>,</span>
<span>  yname       <span class="op">=</span> <span class="st">"wagebins"</span>,</span>
<span>  tname       <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>  gname       <span class="op">=</span> <span class="st">"group"</span>,</span>
<span>  weightsname <span class="op">=</span> <span class="st">"wgt"</span>,</span>
<span>  est_method  <span class="op">=</span> <span class="st">"reg"</span>,</span>
<span>  binpoints   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">mw_df_2007_2015</span><span class="op">$</span><span class="va">wagebins</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  allow_unbalanced_panel <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  seed        <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in didFF(..., distDD = TRUE): You have observations with g=0 and all</span></span>
<span><span class="co">#&gt; time periods t&gt;0; assuming the g=0 cohort is never-treated.</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dist_2007_2015</span><span class="op">$</span><span class="va">table</span><span class="op">)</span></span>
<span><span class="co">#&gt;        level test.estimates      test.se</span></span>
<span><span class="co">#&gt; 1      [0,1]  -4.930592e-03 7.160771e-03</span></span>
<span><span class="co">#&gt; 2   (1,1.25]  -5.071141e-05 9.575429e-05</span></span>
<span><span class="co">#&gt; 3 (1.25,1.5]   1.069623e-05 6.171445e-05</span></span>
<span><span class="co">#&gt; 4 (1.5,1.75]   4.698969e-05 6.634287e-05</span></span>
<span><span class="co">#&gt; 5   (1.75,2]  -2.211360e-03 3.352551e-04</span></span>
<span><span class="co">#&gt; 6   (2,2.25]   9.703339e-04 4.718257e-04</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/pedrohcgs/didFF/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing didFF</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Jon Roth <br><small class="roles"> Author </small>  </li>
<li>
<a href="https://psantanna.com" class="external-link">Pedro H. C. Sant'Anna</a> <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Jon Roth, <a href="https://psantanna.com" class="external-link">Pedro H. C. Sant’Anna</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
